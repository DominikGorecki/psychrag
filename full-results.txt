============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.1, pluggy-1.6.0
rootdir: /home/dardawk/python/psychrag
configfile: pyproject.toml
testpaths: tests
plugins: Faker-38.2.0, logfire-4.16.0, langsmith-0.4.55, anyio-4.12.0
collected 1053 items

tests/unit/test_ai_config.py ................................            [  3%]
tests/unit/test_api_endpoints.py ..............                          [  4%]
tests/unit/test_app_config.py ...............................            [  7%]
tests/unit/test_apply_title_changes.py ...........................       [  9%]
tests/unit/test_apply_title_edits.py .............................       [ 12%]
tests/unit/test_augment.py ..............                                [ 13%]
tests/unit/test_bib_extractor.py ..................................      [ 17%]
tests/unit/test_chunk_headings.py ...................................... [ 20%]
.                                                                        [ 20%]
tests/unit/test_chunk_model.py ................                          [ 22%]
tests/unit/test_consolidate_context.py ................................. [ 25%]
...........................                                              [ 28%]
tests/unit/test_content_chunking.py .................................... [ 31%]
...........                                                              [ 32%]
tests/unit/test_conv_epub2md.py ............                             [ 33%]
tests/unit/test_conv_pdf2md.py ...........                               [ 34%]
tests/unit/test_conversion_api_endpoints.py FFFFFFFFFFF                  [ 35%]
tests/unit/test_database.py ....                                         [ 36%]
tests/unit/test_db_health_check.py ...................................   [ 39%]
tests/unit/test_delete_conversion.py .........                           [ 40%]
tests/unit/test_env_utils.py ...............                             [ 41%]
tests/unit/test_extract_titles.py ...................................... [ 45%]
                                                                         [ 45%]
tests/unit/test_extract_toc.py .............................             [ 48%]
tests/unit/test_init_db.py .......                                       [ 48%]
tests/unit/test_inspection.py ........                                   [ 49%]
tests/unit/test_io_file_model.py .............                           [ 50%]
tests/unit/test_io_folder_data.py ............................           [ 53%]
tests/unit/test_llm_citation_parser.py ...........                       [ 54%]
tests/unit/test_llm_factory.py ......................................... [ 58%]
..................                                                       [ 60%]
tests/unit/test_llm_processor.py .........................               [ 62%]
tests/unit/test_new_work.py ................                             [ 64%]
tests/unit/test_original_markdown.py FFFFF                               [ 64%]
tests/unit/test_pdf_bookmarks2toc.py ................                    [ 66%]
tests/unit/test_prompt_meta_model.py ............                        [ 67%]
tests/unit/test_prompt_template_model.py ............                    [ 68%]
tests/unit/test_query_embeddings.py ......................               [ 70%]
tests/unit/test_query_expansion.py .........................             [ 72%]
tests/unit/test_query_model.py ...................                       [ 74%]
tests/unit/test_rag_config_api.py ..............                         [ 75%]
tests/unit/test_rag_config_db.py .............                           [ 77%]
tests/unit/test_rag_config_integration.py .......